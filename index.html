<!DOCTYPE html>
<html>
<head>
    <title>ASL Tutor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png"
 href="static/images/asl-100.png">
 <script src="https://cdn.tailwindcss.com"></script>
</head>

<style>
input:valid {
  background-color: #d9f99d;
}

input:invalid {
  background-color: #fecaca;
}

</style>
  <body class="font-mono bg-slate-900">
    <main class="flex flex-col min-h-screen">
      <header class="text-3xl bg-slate-900 text-slate-50 p-4 font-semibold">
        ASL TUTOR
      </header>

      <section class="flex flex-auto grow flex-col text-slate-900 bg-slate-50">

    <div class="flex flex-auto grow items-center justify-center w-100 h-100">
    <img src="static/images/asl-100.png" width=100 height=100 id="wordDisplay"></img>
    </div>
    
    <div class="flex flex-col justify-center m-4">
        <label for="answer">What's the word?</label>
        
        <input type="text" id="answer" required/>
        
</div>

<div class="w-full flex justify-between"> 

<button class="bg-slate-900 hover:bg-slate-950 text-slate-50 p-4 m-4 w-2/5" onclick="spellWord(newWord())">
    <span>New Word</span>
  </button>

    
        <button class="bg-slate-900 hover:bg-slate-950 text-slate-50 p-4 m-4 w-2/5"onclick="spellWord(getWord())">Re-spell Word</button> 
        

</div>

<div class="flex m-4 space-x-4 align-object-center">
  <label for="speed">Sign Speed</label>
  <input type="range" id="speed" name="speed" min="50" max="5000" value="1000" step="50" list="markers" style="accent-color: black" class="grow"/>
  
  <datalist id="markers">
  <option value="0"></option>
  <option value="1000"></option>
  <option value="2000"></option>
  <option value="3000"></option>
  <option value="4000"></option>
  <option value="5000"></option>
</datalist>
</div>


    </section>
    <footer class="text-sm bg-slate-900 text-slate-50 p-4 font-semibold"> 
      Site by @<a href="https://jdcowf.github.io" class="underline">jdcowf</a>
      <br>
<a target="_blank" href="https://icons8.com/icon/7285/sign-language" class="underline">Sign Language</a> icon by <a target="_blank" class="underline" href="https://icons8.com">Icons8</a>
    </footer>
</main>
</body>
 

    <script>
        let word = ""

        let dictionary = ["hello", "world"]

window.addEventListener('load', loadDict())


function randomElementFromArray(a) {
    return a[Math.floor(Math.random() * a.length)]
}


function loadDict() {
    fetch('static/data/wordle-dictionary.json')
    .then(function (response) {
        return response.json();
    })
    .then(function (data) {
        dictionary = data;
    })
    .catch(function (err) {
        console.log('error: ' + err);
    });
}
        
        function getWord() {
            return word
        }
        
        function newWord() {
            word = randomElementFromArray(dictionary)
            return getWord()
        }
        
        
        function getCaseInsensitivePattern(w) {
    const transformedString = w.replace(/[a-zA-Z]/g, function(match) {
        return "[" + match.toUpperCase() + match.toLowerCase() + "]"
    }); 

    return transformedString;
}

        function getImageForLetter(c) {
            return "static/images/" + c.toLowerCase() + "-100.png"
        }
        
        function spellWord(w) {
            const word = w;
            const input = document.getElementById("answer");
            input.pattern = getCaseInsensitivePattern(word)
                        
            const wordDisplay = document.getElementById("wordDisplay");
            let index = 0;

            const interval = document.getElementById("speed").value;

            const intervalId = setInterval(function() {
                if (index < word.length) {      const currentLetter = word[index]

                    wordDisplay.src = getImageForLetter(currentLetter);
                    index++;
                } else {
                    clearInterval(intervalId);
                }
            }, interval);
        }
    </script>
</body>
</html>
